<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>note/computer-science/parsing/grammar-and-tree.md</title>
</head>
<body>
<pre style="white-space: pre-wrap;"># Grammar and Tree

I show two formats in this chapter,
they are little languages of parsing-tech :

- `.tree` -- to describe parse-tree
  - with a simple type system

- `.grammar` -- to describe corresponding context-free-grammar
  - in which each rule is uniquely named

## sexp

``` grammar
sexp:list = { &quot;(&quot; sexp-list &quot;)&quot; }
sexp:bool = { bool }

sexp-list:unit = { sexp }
sexp-list:cons = { sexp &quot; &quot; sexp-list }

bool:true = { &quot;true&quot; }
bool:false = { &quot;false&quot; }
```

## tom-dick-and-harry

``` grammar
tom-dick-and-harry:name = { name }
tom-dick-and-harry:list = { list &quot; and &quot; name }

name:tom = { &quot;tom&quot; }
name:dick = { &quot;dick&quot; }
name:harry = { &quot;harry&quot; }

list:unit = { name }
list:cons = { name &quot;, &quot; list }
```

``` tree
// &gt; &quot;tom, dick, and harry&quot;
tom-dick-and-harry:list {
    list:cons {
        name:tom {&quot;tom&quot;}
        &quot;, &quot;
        list:unit {name:dick {&quot;dick&quot;}}}
    &quot; and &quot;
    name:harry {&quot;harry&quot;}}
```

## tdh

- regular grammar

``` grammar
tdh:t = { &quot;t&quot; }
tdh:d = { &quot;d&quot; }
tdh:h = { &quot;h&quot; }
tdh:list = { list }

list:t = { &quot;t&quot; list-tail }
list:d = { &quot;d&quot; list-tail }
list:h = { &quot;h&quot; list-tail }

list-tail:list = { &quot;,&quot; list }
list-tail:t = { &quot;&amp;t&quot; }
list-tail:d = { &quot;&amp;d&quot; }
list-tail:h = { &quot;&amp;h&quot; }
```

- left regular grammar

``` grammar
tdh-left:t = { &quot;t&quot; }
tdh-left:d = { &quot;d&quot; }
tdh-left:h = { &quot;h&quot; }
tdh-left:list = { list }

list:t = { list-head &quot;&amp;t&quot; }
list:d = { list-head &quot;&amp;d&quot; }
list:h = { list-head &quot;&amp;h&quot; }

list-head:t = { &quot;t&quot; }
list-head:d = { &quot;d&quot; }
list-head:h = { &quot;h&quot; }
list-head:before-t = { list-head &quot;,t&quot; }
list-head:before-d = { list-head &quot;,d&quot; }
list-head:before-h = { list-head &quot;,h&quot; }
```

## sum

``` grammar
sum:digit = { digit }
sum:sum = { sum &quot; + &quot; sum }

digit:0 = { &quot;0&quot; }
...
digit:9 = { &quot;9&quot; }
```

``` tree
// &gt; &quot;3 + 5 + 1&quot; -- ((3 + 5) + 1)
sum:sum {
    sum:sum {
        sum:digit {
            digit:3 {&quot;3&quot;}}
        &quot; + &quot;
        sum:digit {
            digit:5 {&quot;5&quot;}}}
    &quot; + &quot;
    sum:digit {
        digit:1 {&quot;1&quot;}}}
```

## sentence

``` grammar
sentence:svo = { subject verb object }

subject:the = { &quot;the &quot; noun }
subject:a = { &quot;a &quot; noun }
subject:name = { proper-name }

object:the = { &quot;the &quot; noun }
object:a = { &quot;a &quot; noun }
object:name = { proper-name }

verb:bit = { &quot;bit&quot; }
verb:chased = { &quot;chased&quot; }

noun:cat = { &quot;cat&quot; }
noun:dog = { &quot;dog&quot; }

proper-name:... = ...
```

## ab

- equal number of &quot;a&quot; &quot;b&quot;

``` grammar
ab:head-a = { &quot;a&quot; b }
ab:head-b = { &quot;b&quot; a }

a:one = { &quot;a&quot; }
a:more = { &quot;a&quot; ab }
a:after-b = { &quot;b&quot; a a }

b:one = { &quot;b&quot; }
b:more = { &quot;b&quot; ab }
b:after-a = { &quot;a&quot; b b }
```

``` tree
// &gt; &quot;aabb&quot;
ab:head-a {
    &quot;a&quot;
    b:after-a {
        &quot;a&quot;
        b:one {&quot;b&quot;}
        b:one {&quot;b&quot;}}}
```

## abc

- ambiguous grammar
- language = &quot;a&quot;^m &quot;b&quot;^n &quot;c&quot;^n | &quot;a&quot;^p &quot;b&quot;^p &quot;c&quot;^q

``` grammar
abc:a-bc = { a bc }
abc:ab-c = { ab c }

a:one = { &quot;a&quot; }
a:more = { &quot;a&quot; a }

bc:one = { &quot;bc&quot; }
bc:more = { &quot;b&quot; bc &quot;c&quot; }

ab:one = { &quot;ab&quot; }
ab:more = { &quot;a&quot; ab &quot;b&quot; }

c:one = { &quot;c&quot; }
c:more = { &quot;c&quot; c }
```

``` tree
// &gt; &quot;aabb&quot;
s:a-bc {
     a:more {&quot;a&quot; a:one {&quot;a&quot;}}
     bc:one {&quot;bc&quot;}}
```

## list

``` grammar
list : -- Gr -&gt; Gr
list:null (t) = {}
list:cons (t) = { t list (t) }
```
- word-list

``` grammar
word:bye = { &quot;bye&quot; }
word:hello = { &quot;hello&quot; }

word-list = { list (word) }
bye-word-list = { list (word:bye) }
```

## non-empty-list

``` grammar
non-empty-list : -- Gr -&gt; Gr
non-empty-list:unit (t) = { t }
non-empty-list:cons (t) = { t non-empty-list (t) }
```

## tom-dick-and-harry -- generic

``` grammar
one-or-more : -- Gr -&gt; Gr
one-or-more:one (t) = { t }
one-or-more:more (t) = { t &quot;, &quot; one-or-more }

more-and-one : -- Gr -&gt; Gr
more-and-one:one (t) = { t }
more-and-one:more (t) = { one-or-more (t) &quot; and &quot; t }

name:tom = { &quot;tom&quot; }
name:dick = { &quot;dick&quot; }
name:harry = { &quot;harry&quot; }

tom-dick-and-harry = { more-and-one (name) }
tom-and-tom = { one-or-more (name:tom) }
tom-and-harry = { one-or-more ([name:tom name:harry]) }
```

``` tree
// &gt; &quot;tom, dick, and harry&quot;
more-and-one:more (name) {
    one-or-more:more (name) {
        name:tom {&quot;tom&quot;}
        &quot;, &quot;
        one-or-more:one (name) {name:dick {&quot;dick&quot;}}}
    &quot; and &quot;
    name:harry {&quot;harry&quot;}}
```

## higher order

``` grammar
line-map :
    -- -- t -&gt; Gr t
    -&gt; Gr
line-map:one (f t) = { f (t) }
line-map:more (f t) = { f (t) &quot;\n&quot; line-map (f t) }

tom-dick-and-harry-lines = { line-map (more-and-one name) }
```
</pre>
</body>
</html>
