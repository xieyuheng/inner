#!/usr/bin/env bash

function install {
    npm install
}

function build {
    echo "[build]"
}

function publish {
    echo "[publish]" &&
        npx plaintext toc src -o src/toc &&
        npx plaintext dir src -o out &&
        npx plaintext file AUTHORS -o out/AUTHORS.html --title "inner | AUTHORS" &&
        npx plaintext file LICENSE -o out/LICENSE.html --title "inner | LICENSE" &&
        cat README src/toc > out/index &&
        npx plaintext file out/index -o out/index.html --title "inner" &&
        true
}

function t {
    echo "[test]"
}

function serve {
    publish &&
        echo "[serve]" &&
        npx http-server out &&
        true
}

function h {
    echo "commands:"
    for subcommand in $(declare -F | sed 's/declare -f//g')
    do
        echo "  $subcommand"
    done
}

if [ $# == 0 ]
then
    h
else
    for TASK in $@
    do
        $TASK
    done
fi
